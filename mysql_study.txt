2017-01-13
1.删除表数据
     truncate table 表名;
     delete from 表名 where 表达式
2.MySql Host is blocked because of many connection errors; unblock with 'mysqladmin flush-hosts'
     原因： 同一个ip在短时间内产生太多（超过mysql数据库max_connection_errors的最大值）中断的数据库连接而导致的阻塞
     解决办法：1、提高允许的max_connection_errors数量（治标不治本）
                     2、使用mysqladmin flush-hosts 命令清理一下hosts文件（不知道mysqladmin在哪个目录下可以使用命令查找：whereis mysqladmin）；
     参考文档: http://www.cnblogs.com/susuyu/archive/2013/05/28/3104249.html


3.mysql 查询 创建语句
     show create table tablename;
     show create view viewname;
     show create procedure proc_name;

4. 检查是否开启计划任务
SHOW VARIABLES LIKE 'event_scheduler';

5. 创建定时任务 每天02点执行
-- 若已存在则删除
drop event ifexists`call_report_yesterday`;

-- 创建
CREATE EVENT ifnotexists`call_report_yesterday`
ON SCHEDULE EVERY 1 DAY
STARTS date_add(curdate(), interval 26 hour) -- 第二天02点开始
ON COMPLETION NOT PRESERVE
ENABLE
COMMENT '每天02点 统一执行报表统计存储过程，统计前一天数据'
DO
CALL report_yesterday();


6. case when 用法
      CASE input_expression
         WHEN when_expression THEN result_expression
             [ ...n ]
        ELSE else_result_expression
    END

7. update 用法
-- 更新 don_users_collect 表 添加elder_id,type 字段数据
update don_users_collect set `type` = '1',
    elder_id = (select elder_id from don_project where don_users_collect.project_id = don_project.id);


8. 级联删除
	delete cp from colum_projec cp
	left join projec p on cp.project_id = p.id
	where cp.column_id = '3954e30538464ec69f55350d38ea20a0' and p.status = '4';
